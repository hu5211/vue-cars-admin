{"remainingRequest":"D:\\vue-cars\\vue-cars-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue-cars\\vue-cars-admin\\src\\components\\formSearch\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue-cars\\vue-cars-admin\\src\\components\\formSearch\\index.vue","mtime":1599091292617},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovL+ecgeW4guWMug0KaW1wb3J0IENpdHlBcmVhIGZyb20gIkBjL2NvbW1vbi9jaXR5QXJlYSI7DQppbXBvcnQgS2V5V29yZCBmcm9tICJAYy9rZXlXb3JkIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkZvcm0iLA0KICBjb21wb25lbnRzOiB7IENpdHlBcmVhLCBLZXlXb3JkIH0sDQogIHByb3BzOiB7DQogICAgZm9ybUl0ZW06IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgZGVmYXVsdDogKCkgPT4gW10NCiAgICB9LA0KICAgIC8v5oyJ6ZKuDQogICAgZm9ybUhhbmRsZXI6IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgZGVmYXVsdDogKCkgPT4gW10NCiAgICB9LA0KICAgIGNvbmZpZzogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgZGVmYXVsdDogKCkgPT4ge30NCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGtleXdvcmQ6IHt9LA0KICAgICAgZm9ybV9kYXRhOiB7fSwNCiAgICAgIGNpdHlfdmFsdWU6ICIiDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8v5pCc57SiDQogICAgc2VhcmNoKCkgew0KICAgICAgY29uc3Qgc2VhcmNoRGF0YSA9IHt9Ow0KICAgICAgLy8g6L+H5ruk56m65pWw57uEDQogICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5mb3JtX2RhdGEpIHsNCiAgICAgICAgaWYgKHRoaXMuZm9ybV9kYXRhW2tleV0pIHsNCiAgICAgICAgICBzZWFyY2hEYXRhW2tleV0gPSB0aGlzLmZvcm1fZGF0YVtrZXldOw0KICAgICAgICB9DQogICAgICB9DQogICAgICAvL+e7hOS7tg0KICAgICAgLy/lhbPplK7or40NCiAgICAgIGlmICh0aGlzLiRyZWZzLmtleXdvcmQgJiYgdGhpcy5rZXl3b3JkLmtleSAmJiB0aGlzLmtleXdvcmQudmFsdWUpIHsNCiAgICAgICAgc2VhcmNoRGF0YVt0aGlzLmtleXdvcmQua2V5XSA9IHRoaXMua2V5d29yZC52YWx1ZTsNCiAgICAgIH0NCiAgICAgIC8v5Yy65Z+fDQogICAgICBpZiAodGhpcy4kcmVmcy5jaXR5ICYmIHRoaXMuY2l0eV92YWx1ZSkgew0KICAgICAgICBzZWFyY2hEYXRhLmFyZWEgPSB0aGlzLmNpdHlfdmFsdWU7DQogICAgICB9DQoNCiAgICAgIHRoaXMuJGVtaXQoImNhbGxiYWNrQ29tcG9uZW50Iiwgew0KICAgICAgICBmdW5jdGlvbjogInNlYXJjaCIsDQogICAgICAgIGRhdGE6IHNlYXJjaERhdGENCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy/ph43nva4NCiAgICByZXNldCgpIHsNCiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldEZpZWxkcygpOw0KICAgICAgLy8g5Z+O5biC57uE5Lu2DQogICAgICBpZiAodGhpcy4kcmVmcy5jaXR5WzBdKSB7DQogICAgICAgIHRoaXMuJHJlZnMuY2l0eVswXS5jbGVhcigpOw0KICAgICAgfQ0KICAgICAgLy8g5YWz6ZSu5a2XDQogICAgICBpZiAodGhpcy4kcmVmcy5rZXl3b3JkWzBdKSB7DQogICAgICAgIHRoaXMuJHJlZnMua2V5d29yZFswXS5jbGVhcigpOw0KICAgICAgfQ0KICAgIH0sDQogICAgaW5pdEZvcm1EYXRhKCkgew0KICAgICAgdGhpcy5mb3JtSXRlbS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAvL+ivu+WPluS4i+aLiemAiemhueeahOaVsOaNrg0KICAgICAgICBpZiAoaXRlbS50eXBlID09PSAiU2VsZWN0Iikgew0KICAgICAgICAgIHRoaXMuc2VsZWN0T3B0aW9uKGl0ZW0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8vIOWtl+auteWIneWni+WMlg0KICAgIGluaXRGb3JtRmVsaWQoKSB7DQogICAgICBjb25zdCBmZWxpZCA9IHt9Ow0KICAgICAgdGhpcy5mb3JtSXRlbS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBpZiAoaXRlbS5wcm9wKSB7DQogICAgICAgICAgZmVsaWRbaXRlbS5wcm9wXSA9ICIiOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIHRoaXMuZm9ybV9kYXRhID0gZmVsaWQ7DQogICAgfSwNCiAgICAvL+S4i+aLiemAiemhuQ0KICAgIHNlbGVjdE9wdGlvbihkYXRhKSB7DQogICAgICBjb25zdCBvcHRpb25zID0gdGhpcy4kc3RvcmUuc3RhdGUuY29uZmlnW2RhdGEub3B0aW9uc107DQogICAgICBpZiAoZGF0YSkgew0KICAgICAgICBkYXRhLm9wdGlvbnMgPSBvcHRpb25zOw0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBmb3JtSXRlbTogew0KICAgICAgaGFuZGxlcihuZXdWYWx1ZSkgew0KICAgICAgICB0aGlzLmluaXRGb3JtRGF0YSgpOw0KICAgICAgICAvLyDor7vlj5blrZfmrrUNCiAgICAgICAgdGhpcy5pbml0Rm9ybUZlbGlkKCk7DQogICAgICB9LA0KICAgICAgaW1tZWRpYXRlOiB0cnVlDQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/formSearch","sourcesContent":["<template>\r\n  <el-form inline :inline-message=\"true\" :model=\"form_data\" ref=\"form\" size=\"small\">\r\n    <el-form-item\r\n      v-for=\"item in formItem\"\r\n      :key=\"item.prop\"\r\n      :label=\"item.label\"\r\n      :prop=\"item.prop\"\r\n      :rules=\"item.rules\"\r\n    >\r\n      <!-- input -->\r\n      <el-input\r\n        v-if=\"item.type === 'Input'\"\r\n        v-model.trim=\"form_data[item.prop]\"\r\n        :placeholder=\"item.placeholder\"\r\n        :style=\"{width:item.width}\"\r\n        :disabled=\"item.disabled\"\r\n      ></el-input>\r\n      <!-- select -->\r\n      <el-select\r\n        v-if=\"item.type === 'Select'\"\r\n        v-model.trim=\"form_data[item.prop]\"\r\n        :placeholder=\"item.placeholder\"\r\n        :style=\"{width:item.width}\"\r\n        :disabled=\"item.disabled\"\r\n      >\r\n        <el-option\r\n          v-for=\"selectItem in item.options\"\r\n          :label=\"selectItem.label || selectItem[item._label]\"\r\n          :key=\"selectItem.value || selectItem[item._value]\"\r\n          :value=\"selectItem.value || selectItem[item._value]\"\r\n        ></el-option>\r\n      </el-select>\r\n      <!-- city -->\r\n      <div v-if=\"item.type ==='City'\">\r\n        <CityArea ref=\"city\" :cityAreaValue.sync=\"city_value\" />\r\n      </div>\r\n      <!-- 关键字 -->\r\n      <div v-if=\"item.type ==='keyword'\">\r\n        <KeyWord ref=\"keyword\" :options=\"['parkingName','address']\" :value.sync=\"keyword\" />\r\n      </div>\r\n      <!-- 插槽 -->\r\n      <slot v-if=\"item.type === 'Slot'\" :name=\"item.slotName\"></slot>\r\n    </el-form-item>\r\n    <!-- 按钮 -->\r\n    <el-form-item>\r\n      <el-button type=\"danger\" @click=\"search\">搜索</el-button>\r\n      <el-button type=\"danger\" @click=\"reset\" v-if=\"config.resetButton\">重置</el-button>\r\n      <template v-for=\"item in formHandler\">\r\n        <router-link :to=\"item.router\" v-if=\"item.element === 'link'\" :key=\"item.key\">\r\n          <el-button style=\"margin:0 10px;\" :type=\"item.type\">{{ item.label }}</el-button>\r\n        </router-link>\r\n\r\n        <el-button\r\n          v-if=\"item.element ==='button'\"\r\n          :key=\"item.key\"\r\n          :type=\"item.type\"\r\n          @click=\"item.handler && item.handler()\"\r\n        >{{ item.label }}</el-button>\r\n      </template>\r\n      <!-- <el-button\r\n        v-for=\"item in formHandler\"\r\n        :key=\"item.key\"\r\n        :type=\"item.type\"\r\n        @click=\"item.handler && item.handler()\"\r\n      >{{ item.label }}</el-button>-->\r\n    </el-form-item>\r\n  </el-form>\r\n</template>\r\n<script>\r\n//省市区\r\nimport CityArea from \"@c/common/cityArea\";\r\nimport KeyWord from \"@c/keyWord\";\r\nexport default {\r\n  name: \"Form\",\r\n  components: { CityArea, KeyWord },\r\n  props: {\r\n    formItem: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    //按钮\r\n    formHandler: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    config: {\r\n      type: Object,\r\n      default: () => {}\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      keyword: {},\r\n      form_data: {},\r\n      city_value: \"\"\r\n    };\r\n  },\r\n  methods: {\r\n    //搜索\r\n    search() {\r\n      const searchData = {};\r\n      // 过滤空数组\r\n      for (let key in this.form_data) {\r\n        if (this.form_data[key]) {\r\n          searchData[key] = this.form_data[key];\r\n        }\r\n      }\r\n      //组件\r\n      //关键词\r\n      if (this.$refs.keyword && this.keyword.key && this.keyword.value) {\r\n        searchData[this.keyword.key] = this.keyword.value;\r\n      }\r\n      //区域\r\n      if (this.$refs.city && this.city_value) {\r\n        searchData.area = this.city_value;\r\n      }\r\n\r\n      this.$emit(\"callbackComponent\", {\r\n        function: \"search\",\r\n        data: searchData\r\n      });\r\n    },\r\n    //重置\r\n    reset() {\r\n      this.$refs.form.resetFields();\r\n      // 城市组件\r\n      if (this.$refs.city[0]) {\r\n        this.$refs.city[0].clear();\r\n      }\r\n      // 关键字\r\n      if (this.$refs.keyword[0]) {\r\n        this.$refs.keyword[0].clear();\r\n      }\r\n    },\r\n    initFormData() {\r\n      this.formItem.forEach(item => {\r\n        //读取下拉选项的数据\r\n        if (item.type === \"Select\") {\r\n          this.selectOption(item);\r\n        }\r\n      });\r\n    },\r\n    // 字段初始化\r\n    initFormFelid() {\r\n      const felid = {};\r\n      this.formItem.forEach(item => {\r\n        if (item.prop) {\r\n          felid[item.prop] = \"\";\r\n        }\r\n      });\r\n      this.form_data = felid;\r\n    },\r\n    //下拉选项\r\n    selectOption(data) {\r\n      const options = this.$store.state.config[data.options];\r\n      if (data) {\r\n        data.options = options;\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    formItem: {\r\n      handler(newValue) {\r\n        this.initFormData();\r\n        // 读取字段\r\n        this.initFormFelid();\r\n      },\r\n      immediate: true\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n</style>"]}]}