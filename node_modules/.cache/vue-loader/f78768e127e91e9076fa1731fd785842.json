{"remainingRequest":"D:\\vue-cars\\vue-cars-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue-cars\\vue-cars-admin\\src\\components\\common\\cityArea\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue-cars\\vue-cars-admin\\src\\components\\common\\cityArea\\index.vue","mtime":1598465208821},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KDQovLyBBUEkNCmltcG9ydCB7IEdldENpdHkgfSBmcm9tICJAL2FwaS9jb21tb24iDQpleHBvcnQgZGVmYXVsdCB7DQoJbmFtZTogJycsDQoJZGF0YSgpew0KCQljb25zdCBfdGhpcyA9IHRoaXM7DQoJCXJldHVybiB7DQoJCQlhZGRyZXNzOiBbXSwNCgkJCWFkZHJlc3NEYXRhOiB7fSwNCgkJCXZhbHVlOiAiIiwNCgkJCWNhc2NhZGVyX29wdGlvbnM6IFtdLA0KCQkJCWNhc2NhZGVyX3Byb3BzOiB7DQoJCQkJCWxhenk6IHRydWUsDQoJCQkJCWxhenlMb2FkIChub2RlLCByZXNvbHZlKSB7DQoJCQkJCQljb25zdCBsZXZlbCA9IG5vZGUubGV2ZWw7DQoJCQkJCQkvLyDor7fmsYLlj4LmlbANCgkJCQkJCWNvbnN0IHJlcXVlc3REYXRhID0ge307DQoJCQkJCQkvLyDlo7DmmI7oh6rlrprkuYnphY3nva4NCgkJCQkJCWNvbnN0IGpzb25UeXBlID0gew0KCQkJCQkJCTA6IHsgdHlwZTogInByb3ZpbmNlIiB9LA0KCQkJCQkJCTE6IHsgdHlwZTogImNpdHkiLCBjb2RlOiAicHJvdmluY2UiIH0sDQoJCQkJCQkJMjogeyB0eXBlOiAiYXJlYSIsIGNvZGU6ICJjaXR5IiB9DQoJCQkJCQl9DQoNCgkJCQkJCWlmKGpzb25UeXBlW2xldmVsXS5jb2RlKSB7IHJlcXVlc3REYXRhW2Ake2pzb25UeXBlW2xldmVsXS5jb2RlfV9jb2RlYF0gPSBub2RlLnZhbHVlIH0NCgkJCQkJCS8vIHR5cGUNCgkJCQkJCXJlcXVlc3REYXRhLnR5cGUgPSBqc29uVHlwZVtsZXZlbF0udHlwZTsNCgkJCQkJCS8vIOecgeW4guWMuueahOaOpeWPow0KCQkJCQkJR2V0Q2l0eShyZXF1ZXN0RGF0YSkudGhlbihyZXNvbnNlID0+IHsNCgkJCQkJCQljb25zdCBkYXRhID0gcmVzb25zZS5kYXRhLmRhdGE7DQoJCQkJCQkJLy8g57G75Z6LDQoJCQkJCQkJY29uc3QgdHlwZSA9IGpzb25UeXBlW2xldmVsXS50eXBlLnRvVXBwZXJDYXNlKCk7DQoJCQkJCQkJLy8g6Ieq5a6a5LmJdmFsdWXjgIFsYWJlbA0KCQkJCQkJCWRhdGEuZm9yRWFjaChpdGVtID0+IHsNCgkJCQkJCQkJaXRlbS52YWx1ZSA9IGl0ZW1bYCR7dHlwZX1fQ09ERWBdOw0KCQkJCQkJCQlpdGVtLmxhYmVsID0gaXRlbVtgJHt0eXBlfV9OQU1FYF07DQoJCQkJCQkJCS8vIOacgOWQjuS4gOWxgumAieaLqQ0KCQkJCQkJCQlpZihsZXZlbCA9PT0gMikgeyBpdGVtLmxlYWYgPSBsZXZlbCA+PSAyOyB9DQoJCQkJCQkJfSkNCgkJCQkJCQkvLyDlrZjlgqjnnIHluILljLrmlbDmja4NCgkJCQkJCQlfdGhpcy5hZGRyZXNzRGF0YVtqc29uVHlwZVtsZXZlbF0udHlwZV0gPSBkYXRhOw0KCQkJCQkJCS8vIOi/lOWbnuiKgueCueaVsOaNrg0KCQkJCQkJCXJlc29sdmUoZGF0YSk7DQoJCQkJCQl9KQ0KCQkJCQkJLy8g6I635Y+WYWRkcmVzcw0KCQkJCQkJaWYobm9kZS5sZXZlbCAhPT0gMCkgew0KCQkJCQkJCV90aGlzLmdldEFkZHJlc3Mobm9kZSk7DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQl9DQoJCX0NCgl9LA0KCW1ldGhvZHM6IHsNCgkJY2hhbmdlVmFsdWUodmFsdWUpew0KCQkJdGhpcy4kZW1pdCgidXBkYXRlOmNpdHlBcmVhVmFsdWUiLCB2YWx1ZS5qb2luKCkpOw0KCQkJLy8g5Yy56YWN5pyA5ZCO5LiA6aG577yM5Yy65Y6/DQoJCQljb25zdCBsYXN0Q29kZSA9IHZhbHVlW3ZhbHVlLmxlbmd0aCAtIDFdOw0KCQkJY29uc3QgYXJlYSA9IHRoaXMuYWRkcmVzc0RhdGEuYXJlYS5maWx0ZXIoaXRlbSA9PiBpdGVtLnZhbHVlID09IGxhc3RDb2RlKVswXTsNCgkJCXRoaXMuYWRkcmVzc1syXSA9IGFyZWEubGFiZWw7DQoJCQl0aGlzLmdldEFkZHJlc3MoKTsNCgkJfSwNCgkJLyoqIOiOt+WPluS4reaWh+WcsOWdgCAqLw0KCQlnZXRBZGRyZXNzKG5vZGUpew0KCQkJaWYobm9kZSkgew0KCQkJCWNvbnN0IGluZGV4ID0gbm9kZS5sZXZlbCAtIDE7DQoJCQkJdGhpcy5hZGRyZXNzW2luZGV4XSA9IG5vZGUubGFiZWw7DQoJCQl9DQoJCQkvLyDkuLogdHJ1ZSDml7bvvIzmiafooYzlnLDlm77kuqTkupINCgkJCWlmKHRoaXMubWFwTG9jYXRpb24pIHsNCgkJCQl0aGlzLiRlbWl0KCJjYWxsYmFjayIsIHsNCgkJCQkJZnVuY3Rpb246ICJzZXRNYXBDZW50ZXIiLA0KCQkJCQlkYXRhOiB7DQoJCQkJCQlhZGRyZXNzOiB0aGlzLmFkZHJlc3Muam9pbigiIikNCgkJCQkJfQ0KCQkJCX0pOw0KCQkJfQ0KCQl9LA0KCQljbGVhcigpew0KCQkJdGhpcy52YWx1ZSA9ICIiOw0KCQl9DQoJfSwNCgljb21wb25lbnRzOiB7fSwNCglwcm9wczogew0KCQljaXR5QXJlYVZhbHVlOiB7DQoJCQl0eXBlOiBTdHJpbmcsDQoJCQlkZWZhdWx0OiAiIg0KCQl9LA0KCQltYXBMb2NhdGlvbjogew0KCQkJdHlwZTogQm9vbGVhbiwNCgkJCWRlZmF1bHQ6IGZhbHNlDQoJCX0NCgl9LA0KICAgDQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"index.vue","sourceRoot":"src/components/common/cityArea","sourcesContent":["<template>\r\n    <el-cascader v-model=\"value\" :options=\"cascader_options\" :props=\"cascader_props\" @change=\"changeValue\"></el-cascader>\r\n</template>\r\n\r\n<script>\r\n// API\r\nimport { GetCity } from \"@/api/common\"\r\nexport default {\r\n\tname: '',\r\n\tdata(){\r\n\t\tconst _this = this;\r\n\t\treturn {\r\n\t\t\taddress: [],\r\n\t\t\taddressData: {},\r\n\t\t\tvalue: \"\",\r\n\t\t\tcascader_options: [],\r\n\t\t\t\tcascader_props: {\r\n\t\t\t\t\tlazy: true,\r\n\t\t\t\t\tlazyLoad (node, resolve) {\r\n\t\t\t\t\t\tconst level = node.level;\r\n\t\t\t\t\t\t// 请求参数\r\n\t\t\t\t\t\tconst requestData = {};\r\n\t\t\t\t\t\t// 声明自定义配置\r\n\t\t\t\t\t\tconst jsonType = {\r\n\t\t\t\t\t\t\t0: { type: \"province\" },\r\n\t\t\t\t\t\t\t1: { type: \"city\", code: \"province\" },\r\n\t\t\t\t\t\t\t2: { type: \"area\", code: \"city\" }\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(jsonType[level].code) { requestData[`${jsonType[level].code}_code`] = node.value }\r\n\t\t\t\t\t\t// type\r\n\t\t\t\t\t\trequestData.type = jsonType[level].type;\r\n\t\t\t\t\t\t// 省市区的接口\r\n\t\t\t\t\t\tGetCity(requestData).then(resonse => {\r\n\t\t\t\t\t\t\tconst data = resonse.data.data;\r\n\t\t\t\t\t\t\t// 类型\r\n\t\t\t\t\t\t\tconst type = jsonType[level].type.toUpperCase();\r\n\t\t\t\t\t\t\t// 自定义value、label\r\n\t\t\t\t\t\t\tdata.forEach(item => {\r\n\t\t\t\t\t\t\t\titem.value = item[`${type}_CODE`];\r\n\t\t\t\t\t\t\t\titem.label = item[`${type}_NAME`];\r\n\t\t\t\t\t\t\t\t// 最后一层选择\r\n\t\t\t\t\t\t\t\tif(level === 2) { item.leaf = level >= 2; }\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t// 存储省市区数据\r\n\t\t\t\t\t\t\t_this.addressData[jsonType[level].type] = data;\r\n\t\t\t\t\t\t\t// 返回节点数据\r\n\t\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// 获取address\r\n\t\t\t\t\t\tif(node.level !== 0) {\r\n\t\t\t\t\t\t\t_this.getAddress(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tchangeValue(value){\r\n\t\t\tthis.$emit(\"update:cityAreaValue\", value.join());\r\n\t\t\t// 匹配最后一项，区县\r\n\t\t\tconst lastCode = value[value.length - 1];\r\n\t\t\tconst area = this.addressData.area.filter(item => item.value == lastCode)[0];\r\n\t\t\tthis.address[2] = area.label;\r\n\t\t\tthis.getAddress();\r\n\t\t},\r\n\t\t/** 获取中文地址 */\r\n\t\tgetAddress(node){\r\n\t\t\tif(node) {\r\n\t\t\t\tconst index = node.level - 1;\r\n\t\t\t\tthis.address[index] = node.label;\r\n\t\t\t}\r\n\t\t\t// 为 true 时，执行地图交互\r\n\t\t\tif(this.mapLocation) {\r\n\t\t\t\tthis.$emit(\"callback\", {\r\n\t\t\t\t\tfunction: \"setMapCenter\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taddress: this.address.join(\"\")\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tclear(){\r\n\t\t\tthis.value = \"\";\r\n\t\t}\r\n\t},\r\n\tcomponents: {},\r\n\tprops: {\r\n\t\tcityAreaValue: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"\"\r\n\t\t},\r\n\t\tmapLocation: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t}\r\n\t},\r\n   \r\n}\r\n</script>\r\n<style lang='scss' scoped>\r\n</style>\r\n<!--\r\n1、组件传入的属性用 props 接收；\r\n2、this.$emit(\"update\")返向修改，结合组件属性的.sync。\r\n-->"]}]}