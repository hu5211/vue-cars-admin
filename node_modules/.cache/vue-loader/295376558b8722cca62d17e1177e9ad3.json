{"remainingRequest":"D:\\vue-cars\\vue-cars-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue-cars\\vue-cars-admin\\src\\views\\amap\\index.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"D:\\vue-cars\\vue-cars-admin\\src\\views\\amap\\index.vue","mtime":1598701319962},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmFtYXAtd3JhcCB7DQogIGhlaWdodDogMTAwJTsNCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/amap","sourcesContent":["<template>\r\n  <div class=\"amap-wrap\">\r\n    <el-amap vid=\"amapContainer\" :events=\"events\" class=\"amap-demo\"></el-amap>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { AMapManager, lazyAMapApiLoaderInstance } from \"vue-amap\";\r\n// 方法\r\nimport { getLngLat } from \"./common\";\r\nimport { addressSetMapCenter } from \"./location\";\r\nimport { amapSetMarker, amapClearMarker } from \"./marker\";\r\nexport default {\r\n  name: \"Amap\",\r\n  data() {\r\n    return {\r\n      // 经纬度\r\n      lnglat: {},\r\n      map: null,\r\n      zoom: 18,\r\n      events: {}\r\n    };\r\n  },\r\n  mounted() {\r\n    //lazyAMapApiLoaderInstance 加载高德地图的api\r\n    lazyAMapApiLoaderInstance.load().then(() => {\r\n      this.mapCreate();\r\n      this.map.on(\"click\", e => {\r\n        const lnglat = getLngLat(e);\r\n        // 更新经纬度\r\n        this.lnglat = lnglat;\r\n        // 回调父组件方法\r\n        this.$emit(\"callback\", {\r\n          function: \"getLnglat\",\r\n          data: {\r\n            lnglat\r\n          }\r\n        }); // 子组件调父组件的方法\r\n        // 设置点覆盖物\r\n        this.setMarker();\r\n      });\r\n    });\r\n  },\r\n  methods: {\r\n    //创建地图\r\n    mapCreate() {\r\n      this.map = new AMap.Map(\"amapContainer\", {\r\n        center: [116.404765, 39.918052],\r\n        zoom: this.zoom //初始化地图层级\r\n      });\r\n      this.map.on(\"complete\", () => {\r\n        this.mapLoads();\r\n      });\r\n    },\r\n    //地图加载完成\r\n    mapLoads() {\r\n      if (this.options.mapLoad) {\r\n        this.$emit(\"callback\", {\r\n          function: \"mapLoad\"\r\n        });\r\n      }\r\n    },\r\n    //销毁地图\r\n    mapDestroy() {\r\n      this.map && this.map.destroy();\r\n    },\r\n    setMapCenter(value) {\r\n      addressSetMapCenter(value, this.map);\r\n    },\r\n    // 设置点覆盖物\r\n    setMarker(lnglat) {\r\n      amapSetMarker(lnglat || this.lnglat, this.map);\r\n    },\r\n    /** 清除点覆盖物 */\r\n    clearMarker() {\r\n      amapClearMarker(this.map);\r\n    }\r\n  },\r\n  props: {\r\n    options: {\r\n      type: Object,\r\n      default: () => {}\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n.amap-wrap {\r\n  height: 100%;\r\n}\r\n</style>"]}]}