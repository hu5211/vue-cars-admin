{"remainingRequest":"D:\\vue-cars\\vue-cars-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue-cars\\vue-cars-admin\\src\\views\\Parking\\add.vue?vue&type=style&index=0&id=3fc9df00&lass=scss&scoped=true&lang=css&","dependencies":[{"path":"D:\\vue-cars\\vue-cars-admin\\src\\views\\Parking\\add.vue","mtime":1598465208887},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmFkZHJlc3MtbWFwIHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBoZWlnaHQ6IDUwMHB4Ow0KfQ0K"},{"version":3,"sources":["add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA","file":"add.vue","sourceRoot":"src/views/Parking","sourcesContent":["<template>\r\n    <div class=\"parking-add\">\r\n        <el-form ref=\"form\" :rules=\"rules\" :model=\"form\" label-width=\"120px\">\r\n            <el-form-item label=\"停车场名称\" prop=\"parkingName\">\r\n                <el-input v-model=\"form.parkingName\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"区域\" prop=\"area\">\r\n                <CityArea ref=\"cityArea\" :mapLocation=\"true\" :cityAreaValue.sync=\"form.area\" @callback=\"callbackComponent\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"类型\" prop=\"type\">\r\n                <el-radio-group v-model=\"form.type\">\r\n                    <el-radio v-for=\"item in type\" :label=\"item.value\" :key=\"item.value\">{{ item.label }}</el-radio>\r\n                </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"可停放车辆\" prop=\"carsNumber\">\r\n                <el-input v-model.number=\"form.carsNumber\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"禁启用\" prop=\"status\">\r\n                <el-radio-group v-model=\"form.status\">\r\n                    <el-radio v-for=\"item in status\" :label=\"item.value\" :key=\"item.value\">{{ item.label }}</el-radio>\r\n                </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"位置\">\r\n                <div class=\"address-map\">\r\n                    <AMap ref=\"amap\" @callback=\"callbackComponent\" />\r\n                </div>\r\n            </el-form-item>\r\n            <el-form-item label=\"经纬度\" prop=\"lnglat\">\r\n                <el-input v-model=\"form.lnglat\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"danger\" :loading=\"button_loading\" @click=\"onSubmit('form')\">确定</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n<script>\r\n// AMAP\r\nimport AMap from \"../amap\";\r\n// 组件\r\nimport CityArea from \"@c/common/cityArea\";\r\n// API\r\nimport { ParkingAdd } from \"@/api/parking\";\r\nexport default {\r\n    name: \"ParkingAdd\",\r\n    data() {\r\n      return {\r\n        status: [\r\n            { label: \"禁用\", value: 1 },\r\n            { label: \"启用\", value: 2 }\r\n        ],\r\n        type: [\r\n            { label: \"室内\", value: 1 },\r\n            { label: \"室外\", value: 2 }\r\n        ],\r\n        form: {\r\n            parkingName: \"\",\r\n            area: \"\",\r\n            type: \"\",\r\n            carsNumber: \"\",\r\n            status: \"\",\r\n            lnglat: \"\",\r\n            content: \"\"\r\n        },\r\n        // 表单验证规则\r\n        rules: {\r\n            parkingName: [\r\n                { required: true, message: \"请输入停车场名称\", trigger: 'change' }\r\n            ],\r\n            carsNumber: [\r\n                { required: true, message: \"数量不能为空\", trigger: 'change' },\r\n                { type: 'number', message: '请输入数字'}\r\n            ],\r\n            area: [\r\n                { required: true, message: \"请选择省市区\", trigger: 'change' }\r\n            ],\r\n            lnglat: [\r\n                { required: true, message: \"经纬度不能为空\", trigger: 'change' }\r\n            ]\r\n        },\r\n        // 按钮加载\r\n        button_loading: false\r\n      }\r\n    },\r\n    components: { AMap, CityArea },\r\n    mounted(){\r\n    },\r\n    methods: {\r\n        callbackComponent(params){\r\n            if(params.function) { this[params.function](params.data);  }\r\n        },\r\n        setMapCenter(data){\r\n            this.$refs.amap.setMapCenter(data.address);\r\n        },\r\n        onSubmit(formName) {\r\n            this.$refs[formName].validate((valid) => {\r\n                if (valid) {\r\n                    this.addParking();\r\n                } else {\r\n                    console.log('error submit!!');\r\n                    return false;\r\n                }\r\n            })\r\n        },\r\n        /** 新增停车场API */\r\n        addParking(){\r\n            this.button_loading = true;\r\n            ParkingAdd(this.form).then(response => {\r\n                this.$message({\r\n                    type: \"primary\",\r\n                    message: response.message\r\n                })\r\n                this.button_loading = false;\r\n                this.reset(\"form\");\r\n            }).catch(error => {\r\n                this.button_loading = false;\r\n            })\r\n        },\r\n        /** 重置表单 */\r\n        reset(formName){\r\n            this.$refs[formName].resetFields();\r\n            // 清除 cityAray 的值 \r\n            this.$refs.cityArea.clear();\r\n            // 清除地图覆盖物\r\n            this.$refs.amap.clearMarker();\r\n        },\r\n        /** 获取经纬度 */\r\n        getLnglat(data){\r\n            this.form.lnglat = data.lnglat.value\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lass=\"scss\" scoped>\r\n.address-map {\r\n    width: 100%;\r\n    height: 500px;\r\n}\r\n</style>"]}]}