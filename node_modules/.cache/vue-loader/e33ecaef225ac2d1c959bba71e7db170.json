{"remainingRequest":"D:\\vue-cars\\vue-cars-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue-cars\\vue-cars-admin\\src\\components\\tableData\\index.vue?vue&type=style&index=0&id=74983d8a&lang=scss&scoped=true&","dependencies":[{"path":"D:\\vue-cars\\vue-cars-admin\\src\\components\\tableData\\index.vue","mtime":1599092005659},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5tci0xMCB7DQogIG1hcmdpbi1yaWdodDogMTBweDsNCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoRA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/tableData","sourcesContent":["<template>\r\n  <div>\r\n    <FormSearch\r\n      v-if=\"table_config.search_form\"\r\n      :formItem=\"searchFormConfig.form_item || []\"\r\n      :formHandler=\"searchFormConfig.form_handler || []\"\r\n      :config=\"searchFormConfig.config || {}\"\r\n      @callbackComponent=\"callbackComponent\"\r\n    />\r\n    <!-- 表格数据 -->\r\n    <el-table\r\n      v-loading=\"loading_table\"\r\n      element-loading-text=\"拼命加载中\"\r\n      :data=\"table_data\"\r\n      border\r\n      style=\"width: 100%\"\r\n      size=\"small\"\r\n    >\r\n      <el-table-column v-if=\"table_config.checkbox\" type=\"selection\" width=\"35\"></el-table-column>\r\n      <template v-for=\"item in this.table_config.thead\">\r\n        <!-- 回调 -->\r\n        <el-table-column\r\n          v-if=\"item.type ==='function'\"\r\n          :key=\"item.prop\"\r\n          :prop=\"item.prop\"\r\n          :label=\"item.label\"\r\n          :width=\"item.width\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <span v-html=\" item.callback && item.callback(scope.row,item.prop)\"></span>\r\n          </template>\r\n        </el-table-column>\r\n        <!-- 插槽slot -->\r\n        <el-table-column\r\n          v-else-if=\"item.type ==='slot'\"\r\n          :key=\"item.prop\"\r\n          :prop=\"item.prop\"\r\n          :label=\"item.label\"\r\n          :width=\"item.width\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <slot :name=\"item.slotName\" :data=\"scope.row\"></slot>\r\n          </template>\r\n        </el-table-column>\r\n        <!-- 图片渲染 -->\r\n        <!-- 图标显示 -->\r\n        <el-table-column\r\n          v-else-if=\"item.type ==='image'\"\r\n          :key=\"item.prop\"\r\n          :prop=\"item.prop\"\r\n          :label=\"item.label\"\r\n          :width=\"item.width\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <img :src=\"scope.row.imgUrl\" :width=\"item.imgwidth || 50\" alt=\"item.name\" />\r\n          </template>\r\n        </el-table-column>\r\n        <!-- 操作 -->\r\n        <el-table-column\r\n          v-else-if=\"item.type ==='operation'\"\r\n          :key=\"item.prop\"\r\n          :prop=\"item.prop\"\r\n          :label=\"item.label\"\r\n          :width=\"item.width\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <slot v-if=\"item.slotName\" :name=\"item.slotName\" :data=\"scope.row\"></slot>\r\n            <!-- 编辑 -->\r\n            <template v-if=\"item.default && item.default.editButton\">\r\n              <el-button\r\n                v-if=\"item.default.editButtonEvent\"\r\n                type=\"danger\"\r\n                size=\"mini\"\r\n                @click=\"edit(scope.row.id,item.default.editButtonLink)\"\r\n              >编辑</el-button>\r\n              <router-link\r\n                v-else\r\n                :to=\"{ name: item.default.editButtonLink,query:{id:scope.row.id} }\"\r\n              >\r\n                <el-button type=\"danger\" size=\"mini\" class=\"mr-10\">编辑</el-button>\r\n              </router-link>\r\n            </template>\r\n            <!-- 删除 -->\r\n            <el-button\r\n              size=\"mini\"\r\n              v-if=\"item.default && item.default.deleteButton\"\r\n              :loading=\"scope.row.id == rowId\"\r\n              @click=\"delConfirm(scope.row.id)\"\r\n            >删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <!-- 纯文本渲染 -->\r\n        <el-table-column\r\n          v-else\r\n          :key=\"item.prop\"\r\n          :prop=\"item.prop\"\r\n          :label=\"item.label\"\r\n          :width=\"item.width\"\r\n        ></el-table-column>\r\n      </template>\r\n    </el-table>\r\n\r\n    <el-row class=\"padding-top-30\">\r\n      <el-col :span=\"7\">\r\n        <div style=\"padding:5px;\"></div>\r\n      </el-col>\r\n      <el-col :span=\"17\">\r\n        <el-pagination\r\n          v-if=\"table_config.pagination\"\r\n          background\r\n          class=\"pull-right\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"currentPage\"\r\n          :page-sizes=\"[10, 20, 50,100]\"\r\n          :page-size=\"10\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n        ></el-pagination>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n<script>\r\nimport FormSearch from \"@c/formSearch\";\r\nimport { GetTableData, Delete } from \"@/api/common\";\r\n//api\r\nimport { ParkingDelete } from \"@/api/parking\";\r\nimport { CarsDelete } from \"@/api/cars\";\r\nexport default {\r\n  name: \"TableComponent\",\r\n  components: { FormSearch },\r\n  data() {\r\n    return {\r\n      // 加载提示\r\n      loading_table: true,\r\n      //tableData\r\n      table_data: [],\r\n      table_config: {\r\n        thead: [],\r\n        checkbox: true,\r\n        url: \"\",\r\n        pagination: true,\r\n        data: {},\r\n        search_form: true\r\n      },\r\n      //页码\r\n      total: 0,\r\n      //当前页码\r\n      currentPage: 1,\r\n      rowId: \"\",\r\n      form_data: {}\r\n    };\r\n  },\r\n  beforeMount() {},\r\n  methods: {\r\n    callbackComponent(params) {\r\n      this[params.function](params.data);\r\n    },\r\n    search(data) {\r\n      const searchData = data;\r\n      searchData.pageNumber = 1;\r\n      searchData.pageSize = 10;\r\n      this.requestData(searchData);\r\n    },\r\n    //table_config\r\n    initConfig() {\r\n      for (let key in this.config) {\r\n        if (Object.keys(this.table_config).includes(key)) {\r\n          this.table_config[key] = this.config[key];\r\n        }\r\n      }\r\n      //配置完成后开始读取接口数据\r\n      this.loadData();\r\n    },\r\n    loadData() {\r\n      let requestData = {\r\n        url: this.table_config.url,\r\n        data: this.table_config.data\r\n      };\r\n      this.loading_table = true;\r\n      //获取列表\r\n      GetTableData(requestData)\r\n        .then(response => {\r\n          const data = response.data;\r\n          //判断数据是否存在\r\n          if (data) {\r\n            this.table_data = data.data;\r\n          }\r\n          //页码\r\n          this.$nextTick(() => {\r\n            //DOM渲染完成之后\r\n          });\r\n          this.total = data.total;\r\n          this.loading_table = false;\r\n        })\r\n        .catch(error => {\r\n          this.loading_table = false;\r\n        });\r\n    },\r\n    requestData(params = \"\") {\r\n      //   //处理业务逻辑\r\n      if (params) {\r\n        this.table_config.data = params;\r\n      }\r\n      this.loadData();\r\n    },\r\n    //页码\r\n    handleSizeChange(val) {\r\n      this.table_config.data.pageSize = val;\r\n      this.loadData();\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.table_config.data.pageNumber = val;\r\n      this.loadData();\r\n    },\r\n    //删除\r\n    delConfirm(id) {\r\n      this.$confirm(\"确定要删除吗？\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(() => {\r\n          this.rowId = id;\r\n          let requestData = {\r\n            url: this.table_config.url + \"Delete\",\r\n            data: { id }\r\n          };\r\n\r\n          Delete(requestData).then(response => {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: response.message\r\n            });\r\n            this.rowId = \"\";\r\n            this.loadData();\r\n          });\r\n        })\r\n        .catch(() => {\r\n          this.rowId = \"\";\r\n        });\r\n    },\r\n\r\n    //编辑\r\n    edit(id, routerName) {\r\n      this.$router.push({\r\n        name: routerName,\r\n        query: {\r\n          id: id\r\n        }\r\n      });\r\n    }\r\n  },\r\n  props: {\r\n    config: {\r\n      type: Object,\r\n      default: () => {}\r\n    },\r\n    searchFormConfig: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  watch: {\r\n    config: {\r\n      handler(newValue) {\r\n        this.initConfig();\r\n      },\r\n      immediate: true\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.mr-10 {\r\n  margin-right: 10px;\r\n}\r\n</style>"]}]}