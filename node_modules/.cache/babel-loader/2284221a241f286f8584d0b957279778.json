{"remainingRequest":"D:\\vue-cars\\vue-cars-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\vue-cars\\vue-cars-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue-cars\\vue-cars-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue-cars\\vue-cars-admin\\src\\components\\formSearch\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue-cars\\vue-cars-admin\\src\\components\\formSearch\\index.vue","mtime":1599091292617},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-cars\\vue-cars-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy/nnIHluILljLoKaW1wb3J0IENpdHlBcmVhIGZyb20gIkBjL2NvbW1vbi9jaXR5QXJlYSI7CmltcG9ydCBLZXlXb3JkIGZyb20gIkBjL2tleVdvcmQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkZvcm0iLAogIGNvbXBvbmVudHM6IHsKICAgIENpdHlBcmVhOiBDaXR5QXJlYSwKICAgIEtleVdvcmQ6IEtleVdvcmQKICB9LAogIHByb3BzOiB7CiAgICBmb3JtSXRlbTogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgLy/mjInpkq4KICAgIGZvcm1IYW5kbGVyOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICBjb25maWc6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHt9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAga2V5d29yZDoge30sCiAgICAgIGZvcm1fZGF0YToge30sCiAgICAgIGNpdHlfdmFsdWU6ICIiCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy/mkJzntKIKICAgIHNlYXJjaDogZnVuY3Rpb24gc2VhcmNoKCkgewogICAgICB2YXIgc2VhcmNoRGF0YSA9IHt9OyAvLyDov4fmu6TnqbrmlbDnu4QKCiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmZvcm1fZGF0YSkgewogICAgICAgIGlmICh0aGlzLmZvcm1fZGF0YVtrZXldKSB7CiAgICAgICAgICBzZWFyY2hEYXRhW2tleV0gPSB0aGlzLmZvcm1fZGF0YVtrZXldOwogICAgICAgIH0KICAgICAgfSAvL+e7hOS7tgogICAgICAvL+WFs+mUruivjQoKCiAgICAgIGlmICh0aGlzLiRyZWZzLmtleXdvcmQgJiYgdGhpcy5rZXl3b3JkLmtleSAmJiB0aGlzLmtleXdvcmQudmFsdWUpIHsKICAgICAgICBzZWFyY2hEYXRhW3RoaXMua2V5d29yZC5rZXldID0gdGhpcy5rZXl3b3JkLnZhbHVlOwogICAgICB9IC8v5Yy65Z+fCgoKICAgICAgaWYgKHRoaXMuJHJlZnMuY2l0eSAmJiB0aGlzLmNpdHlfdmFsdWUpIHsKICAgICAgICBzZWFyY2hEYXRhLmFyZWEgPSB0aGlzLmNpdHlfdmFsdWU7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoImNhbGxiYWNrQ29tcG9uZW50IiwgewogICAgICAgIGZ1bmN0aW9uOiAic2VhcmNoIiwKICAgICAgICBkYXRhOiBzZWFyY2hEYXRhCiAgICAgIH0pOwogICAgfSwKICAgIC8v6YeN572uCiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldEZpZWxkcygpOyAvLyDln47luILnu4Tku7YKCiAgICAgIGlmICh0aGlzLiRyZWZzLmNpdHlbMF0pIHsKICAgICAgICB0aGlzLiRyZWZzLmNpdHlbMF0uY2xlYXIoKTsKICAgICAgfSAvLyDlhbPplK7lrZcKCgogICAgICBpZiAodGhpcy4kcmVmcy5rZXl3b3JkWzBdKSB7CiAgICAgICAgdGhpcy4kcmVmcy5rZXl3b3JkWzBdLmNsZWFyKCk7CiAgICAgIH0KICAgIH0sCiAgICBpbml0Rm9ybURhdGE6IGZ1bmN0aW9uIGluaXRGb3JtRGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuZm9ybUl0ZW0uZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIC8v6K+75Y+W5LiL5ouJ6YCJ6aG555qE5pWw5o2uCiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gIlNlbGVjdCIpIHsKICAgICAgICAgIF90aGlzLnNlbGVjdE9wdGlvbihpdGVtKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWtl+auteWIneWni+WMlgogICAgaW5pdEZvcm1GZWxpZDogZnVuY3Rpb24gaW5pdEZvcm1GZWxpZCgpIHsKICAgICAgdmFyIGZlbGlkID0ge307CiAgICAgIHRoaXMuZm9ybUl0ZW0uZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChpdGVtLnByb3ApIHsKICAgICAgICAgIGZlbGlkW2l0ZW0ucHJvcF0gPSAiIjsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmZvcm1fZGF0YSA9IGZlbGlkOwogICAgfSwKICAgIC8v5LiL5ouJ6YCJ6aG5CiAgICBzZWxlY3RPcHRpb246IGZ1bmN0aW9uIHNlbGVjdE9wdGlvbihkYXRhKSB7CiAgICAgIHZhciBvcHRpb25zID0gdGhpcy4kc3RvcmUuc3RhdGUuY29uZmlnW2RhdGEub3B0aW9uc107CgogICAgICBpZiAoZGF0YSkgewogICAgICAgIGRhdGEub3B0aW9ucyA9IG9wdGlvbnM7CiAgICAgIH0KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBmb3JtSXRlbTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5ld1ZhbHVlKSB7CiAgICAgICAgdGhpcy5pbml0Rm9ybURhdGEoKTsgLy8g6K+75Y+W5a2X5q61CgogICAgICAgIHRoaXMuaW5pdEZvcm1GZWxpZCgpOwogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0KICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <el-form inline :inline-message=\"true\" :model=\"form_data\" ref=\"form\" size=\"small\">\r\n    <el-form-item\r\n      v-for=\"item in formItem\"\r\n      :key=\"item.prop\"\r\n      :label=\"item.label\"\r\n      :prop=\"item.prop\"\r\n      :rules=\"item.rules\"\r\n    >\r\n      <!-- input -->\r\n      <el-input\r\n        v-if=\"item.type === 'Input'\"\r\n        v-model.trim=\"form_data[item.prop]\"\r\n        :placeholder=\"item.placeholder\"\r\n        :style=\"{width:item.width}\"\r\n        :disabled=\"item.disabled\"\r\n      ></el-input>\r\n      <!-- select -->\r\n      <el-select\r\n        v-if=\"item.type === 'Select'\"\r\n        v-model.trim=\"form_data[item.prop]\"\r\n        :placeholder=\"item.placeholder\"\r\n        :style=\"{width:item.width}\"\r\n        :disabled=\"item.disabled\"\r\n      >\r\n        <el-option\r\n          v-for=\"selectItem in item.options\"\r\n          :label=\"selectItem.label || selectItem[item._label]\"\r\n          :key=\"selectItem.value || selectItem[item._value]\"\r\n          :value=\"selectItem.value || selectItem[item._value]\"\r\n        ></el-option>\r\n      </el-select>\r\n      <!-- city -->\r\n      <div v-if=\"item.type ==='City'\">\r\n        <CityArea ref=\"city\" :cityAreaValue.sync=\"city_value\" />\r\n      </div>\r\n      <!-- 关键字 -->\r\n      <div v-if=\"item.type ==='keyword'\">\r\n        <KeyWord ref=\"keyword\" :options=\"['parkingName','address']\" :value.sync=\"keyword\" />\r\n      </div>\r\n      <!-- 插槽 -->\r\n      <slot v-if=\"item.type === 'Slot'\" :name=\"item.slotName\"></slot>\r\n    </el-form-item>\r\n    <!-- 按钮 -->\r\n    <el-form-item>\r\n      <el-button type=\"danger\" @click=\"search\">搜索</el-button>\r\n      <el-button type=\"danger\" @click=\"reset\" v-if=\"config.resetButton\">重置</el-button>\r\n      <template v-for=\"item in formHandler\">\r\n        <router-link :to=\"item.router\" v-if=\"item.element === 'link'\" :key=\"item.key\">\r\n          <el-button style=\"margin:0 10px;\" :type=\"item.type\">{{ item.label }}</el-button>\r\n        </router-link>\r\n\r\n        <el-button\r\n          v-if=\"item.element ==='button'\"\r\n          :key=\"item.key\"\r\n          :type=\"item.type\"\r\n          @click=\"item.handler && item.handler()\"\r\n        >{{ item.label }}</el-button>\r\n      </template>\r\n      <!-- <el-button\r\n        v-for=\"item in formHandler\"\r\n        :key=\"item.key\"\r\n        :type=\"item.type\"\r\n        @click=\"item.handler && item.handler()\"\r\n      >{{ item.label }}</el-button>-->\r\n    </el-form-item>\r\n  </el-form>\r\n</template>\r\n<script>\r\n//省市区\r\nimport CityArea from \"@c/common/cityArea\";\r\nimport KeyWord from \"@c/keyWord\";\r\nexport default {\r\n  name: \"Form\",\r\n  components: { CityArea, KeyWord },\r\n  props: {\r\n    formItem: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    //按钮\r\n    formHandler: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    config: {\r\n      type: Object,\r\n      default: () => {}\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      keyword: {},\r\n      form_data: {},\r\n      city_value: \"\"\r\n    };\r\n  },\r\n  methods: {\r\n    //搜索\r\n    search() {\r\n      const searchData = {};\r\n      // 过滤空数组\r\n      for (let key in this.form_data) {\r\n        if (this.form_data[key]) {\r\n          searchData[key] = this.form_data[key];\r\n        }\r\n      }\r\n      //组件\r\n      //关键词\r\n      if (this.$refs.keyword && this.keyword.key && this.keyword.value) {\r\n        searchData[this.keyword.key] = this.keyword.value;\r\n      }\r\n      //区域\r\n      if (this.$refs.city && this.city_value) {\r\n        searchData.area = this.city_value;\r\n      }\r\n\r\n      this.$emit(\"callbackComponent\", {\r\n        function: \"search\",\r\n        data: searchData\r\n      });\r\n    },\r\n    //重置\r\n    reset() {\r\n      this.$refs.form.resetFields();\r\n      // 城市组件\r\n      if (this.$refs.city[0]) {\r\n        this.$refs.city[0].clear();\r\n      }\r\n      // 关键字\r\n      if (this.$refs.keyword[0]) {\r\n        this.$refs.keyword[0].clear();\r\n      }\r\n    },\r\n    initFormData() {\r\n      this.formItem.forEach(item => {\r\n        //读取下拉选项的数据\r\n        if (item.type === \"Select\") {\r\n          this.selectOption(item);\r\n        }\r\n      });\r\n    },\r\n    // 字段初始化\r\n    initFormFelid() {\r\n      const felid = {};\r\n      this.formItem.forEach(item => {\r\n        if (item.prop) {\r\n          felid[item.prop] = \"\";\r\n        }\r\n      });\r\n      this.form_data = felid;\r\n    },\r\n    //下拉选项\r\n    selectOption(data) {\r\n      const options = this.$store.state.config[data.options];\r\n      if (data) {\r\n        data.options = options;\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    formItem: {\r\n      handler(newValue) {\r\n        this.initFormData();\r\n        // 读取字段\r\n        this.initFormFelid();\r\n      },\r\n      immediate: true\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n</style>"],"sourceRoot":"src/components/formSearch"}]}